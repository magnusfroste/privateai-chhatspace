services:
  app:
    build: .
    ports:
      - "8000:8000"
    env_file:
      - .env
    environment:
      - OCR_SERVICE_URL=http://marker-api:8001
    volumes:
      - app_data:/data
    depends_on:
      - marker-api
    restart: unless-stopped

  marker-api:
    image: savatar101/marker-api
    ports:
      - "8001:8001"
    environment:
      - TORCH_DEVICE=cpu
    shm_size: "4g"
    restart: unless-stopped

volumes:
  autoversio_data:
