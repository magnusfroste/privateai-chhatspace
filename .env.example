# =============================================================================
# Private AI Chatspace - Environment Configuration
# =============================================================================
#
# USAGE:
#   1. Copy this file: cp .env.example .env
#   2. Edit values as needed
#   3. Run: docker-compose up
#
# FOR LOCAL DEVELOPMENT (without Docker):
#   - Backend: copy to backend/.env
#   - Frontend: see frontend/.env.example
#
# =============================================================================

# -----------------------------------------------------------------------------
# App Configuration
# -----------------------------------------------------------------------------
APP_NAME=Private AI Chatspace

# Admin credentials (created on first startup)
ADMIN_EMAIL=admin@localhost
ADMIN_PASSWORD=changeme

# JWT Secret (generate with: openssl rand -hex 32)
SECRET_KEY=change-this-to-a-secure-random-string

# -----------------------------------------------------------------------------
# LLM Configuration (OpenAI-compatible API)
# -----------------------------------------------------------------------------
# Examples:
#   - Local vLLM: http://172.17.0.1:8000/v1
#   - OpenAI: https://api.openai.com/v1
#   - Azure: https://your-resource.openai.azure.com/v1
#   - Ollama: http://localhost:11434/v1
LLM_BASE_URL=http://172.17.0.1:8000/v1
LLM_API_KEY=your-api-key
LLM_MODEL=default

# LLM Generation Parameters
LLM_TEMPERATURE=0.7
LLM_TEMPERATURE_TOOL=0.2
LLM_TOP_P=0.9
LLM_REPETITION_PENALTY=1.05

# Context Window (adjust based on your model)
MAX_CONTEXT_TOKENS=128000

# -----------------------------------------------------------------------------
# Embedder Configuration (OpenAI-compatible API)
# -----------------------------------------------------------------------------
# Can be same as LLM or separate service
EMBEDDER_BASE_URL=http://172.17.0.1:8001/v1
EMBEDDER_API_KEY=your-api-key
EMBEDDER_MODEL=default

# -----------------------------------------------------------------------------
# Vector Store
# -----------------------------------------------------------------------------
# Options: "qdrant" (default), "lancedb"
#   - qdrant: Enterprise-grade with hybrid search (requires Qdrant container)
#   - lancedb: Zero-config file-based (no container needed)
VECTOR_STORE=qdrant

# Qdrant URL (only if VECTOR_STORE=qdrant)
# Docker: http://qdrant:6333
# Local: http://localhost:6333
QDRANT_URL=http://qdrant:6333

# LanceDB path (only if VECTOR_STORE=lancedb)
LANCEDB_PATH=/data/lancedb

# -----------------------------------------------------------------------------
# RAG Settings (defaults for new workspaces)
# -----------------------------------------------------------------------------
DEFAULT_TOP_N=5
DEFAULT_SIMILARITY_THRESHOLD=0.25
DEFAULT_USE_HYBRID_SEARCH=true
DEFAULT_USE_WEB_SEARCH=false
DEFAULT_CHAT_MODE=chat

# -----------------------------------------------------------------------------
# PDF Processing
# -----------------------------------------------------------------------------
# Options: "docling-api", "marker-api", "pdfplumber"
#   - docling-api: GPU-accelerated, OCR, tables (recommended)
#   - marker-api: GPU-accelerated, OCR
#   - pdfplumber: Better text/table extraction (no OCR, fallback)
PDF_PROVIDER=pdfplumber

# Docling Service URL (only if PDF_PROVIDER=docling-api)
DOCLING_SERVICE_URL=http://docling:5001

# Marker API URL (only if PDF_PROVIDER=marker-api)
OCR_SERVICE_URL=http://marker:8001

# -----------------------------------------------------------------------------
# Web Search (optional)
# -----------------------------------------------------------------------------
# Get API key at: https://www.firecrawl.dev/
FIRECRAWL_API_KEY=

# -----------------------------------------------------------------------------
# Database & Storage
# -----------------------------------------------------------------------------
DATABASE_URL=sqlite+aiosqlite:////data/app.db
DATA_DIR=/data
DOCUMENTS_DIR=/data/documents
ORIGINALS_DIR=/data/documents/originals
MARKDOWN_DIR=/data/documents/markdown

# -----------------------------------------------------------------------------
# A/B Test Configuration (for comparing with AnythingLLM)
# -----------------------------------------------------------------------------
ABTEST_ANYTHINGLLM_URL=
ABTEST_ANYTHINGLLM_API_KEY=
ABTEST_ANYTHINGLLM_WORKSPACE=rag-test
ABTEST_PRIVATEAI_URL=http://localhost:8000
ABTEST_PRIVATEAI_API_KEY=
ABTEST_PRIVATEAI_WORKSPACE_ID=2

# -----------------------------------------------------------------------------
# Debug
# -----------------------------------------------------------------------------
DEBUG=false
